<form [formGroup]="linkForm" (submit)="updateImgLink()">
  <input #imgInput type="file">
  <button type="submit">Upload/Reset image</button>
</form>

<form [formGroup]="fileForm" (submit)="handleFile()">
  <input #fileInput type="file">
  <button type="submit">Upload file</button>
</form>

<div class="rangeInput">
  <label for="rangeSelector">Using {{bitesPerChannel}} bite{{bitesPerChannel>1?"s":""}} per channel!</label>
  <input id="rangeSelector" type="range" [ngModel]="bitesPerChannel" (ngModelChange)="updateSlider($event)" min="1" max="8">
</div>

<p *ngIf="isImgLoaded">Size: [{{canvasW}}x{{canvasH}}]</p>
<p *ngIf="isImgLoaded">{{parseSize(imgAvailableBytes)}} available</p>
<p *ngIf="isFileLoaded">The loaded file will occupy {{parseSize(fileMetadata.size)}}</p>
<div *ngIf="isFileLoaded && isImgLoaded">
  <p *ngIf="imgAvailableBytes >= fileMetadata.size" class="success">You can Inject the file into the image!</p>
  <p *ngIf="imgAvailableBytes < fileMetadata.size" class="error">The file is bigger than your image</p>
</div>

<div class="column">
  <div>
    <button *ngIf="isImgLoaded" (click)="extractDataFromImage()">Extract data from image!</button>
    <button *ngIf="isFileLoaded && isImgLoaded &&imgAvailableBytes >= fileMetadata.size" (click)="injectFIleIntoImage()">Inject file into image!</button>
    <button *ngIf="isImgLoaded" (click)="downloadCurrentCanvas()">Download image!</button>
  </div>
  <div class="scrollableCanvas">
    <canvas #previewCanvas  [attr.width]="canvasW" [attr.height]="canvasH"></canvas>
  </div>
</div>
